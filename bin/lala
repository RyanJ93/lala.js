#!/usr/bin/env node

'use strict';

const lala = require('../index');
const commands = require('../commands/index');

let namespace = '';
console.log('\x1b[36m%s\x1b[0m', 'Welcome to Lala\'s console tool!');
process.stdout.write('> ');
process.stdin.on('data', (data) => {
    data = data.toString().trim();
    let args = data.split(' ');
    switch ( args[0] ){
        case '':{
            process.stdout.write('> ');
        }break;
        case 'this.clear':{
            console.clear();
        }break;
        case 'this.use':{
            namespace = args[1] !== '' && typeof args[1] === 'string' ? args[1] : 'com.lala';
            console.log('Now using namespace ' + namespace + '.');
        }break;
        case 'this.detach':{
            namespace = '';
            console.log('No more namespace in use.');
        }break;
        case 'this.exit':{
            console.log('Bye! 🙋‍️');
            process.exit();
        }break;
        default:{
            lala.Command.exec(namespace === '' ? data : ( namespace + '.' + data ));
        }break;
    }
    process.stdout.write('> ');
});
